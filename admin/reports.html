<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Admin — Reports</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link rel="stylesheet" href="../css/styles.css"/>
</head>
<body>
  <nav class="navbar navbar-light bg-white shadow-sm">
    <div class="container-xl d-flex justify-content-between align-items-center">
      <div class="brand">Admin • Shopyfy</div>
      <div>
        <a class="btn btn-outline-secondary btn-sm me-2" href="dashboard.html">Dashboard</a>
        <a class="btn btn-outline-secondary btn-sm me-2" href="products.html">Products</a>
        <a class="btn btn-outline-secondary btn-sm me-2" href="orders.html">Orders</a>
        <a class="btn btn-outline-secondary btn-sm me-2" href="add-product.html">Add</a>
        <button id="admin-logout" class="btn btn-outline-danger btn-sm">Logout</button>
      </div>
    </div>
  </nav>

  <main class="container-xl py-4">
    <h5>Reports</h5>
    <div id="admin-summary" class="card p-3 mb-3"></div>
    <div class="card p-3">
      <h6>Top products (by sold)</h6>
      <div id="report-top-products" class="small text-muted"></div>
    </div>
  </main>

<script src="../js/script.js"></script>
<script>
  if(!requireAdmin()) {} else {
    renderAdminSummary();
    const prods = loadProducts();
    const top = prods.slice().sort((a,b)=> (b.sold||0)-(a.sold||0)).slice(0,5);
    document.getElementById('report-top-products').textContent = top.length ? top.map(p=>`${p.title} (${p.sold||0})`).join(' • ') : 'No sales yet';
    document.getElementById('admin-logout').onclick = adminLogout;
  }
</script>
</body>
</html>
